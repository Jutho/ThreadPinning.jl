<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ThreadPinning · ThreadPinning.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="ThreadPinning.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>ThreadPinning.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>ThreadPinning</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Noteworthy-Alternatives"><span>Noteworthy Alternatives</span></a></li><li><a class="tocitem" href="#Acknowledgements"><span>Acknowledgements</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="examples/ex_pinning_julia_threads/">Pinning Julia Threads</a></li><li><a class="tocitem" href="examples/ex_blas/">Autochecking BLAS Thread Settings</a></li><li><a class="tocitem" href="examples/ex_core2core_latency/">Measuring Core-to-Core Latency</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="explanations/why/">Why Pin Julia Threads?</a></li><li><a class="tocitem" href="explanations/blas/">Julia Threads + BLAS Threads</a></li><li><a class="tocitem" href="explanations/how/">How It Works</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="refs/api/">API</a></li><li><a class="tocitem" href="refs/latency/">Latency</a></li><li><a class="tocitem" href="refs/libX/">LibX</a></li><li><a class="tocitem" href="refs/utility/">Utility</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ThreadPinning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ThreadPinning</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ThreadPinning.jl"><a class="docs-heading-anchor" href="#ThreadPinning.jl">ThreadPinning.jl</a><a id="ThreadPinning.jl-1"></a><a class="docs-heading-anchor-permalink" href="#ThreadPinning.jl" title="Permalink"></a></h1><p><a href="https://github.com/carstenbauer/ThreadPinning.jl/">ThreadPinning.jl</a> allows you to (interactively) pin Julia threads to specific cores at runtime. This can be important for achieving optimal performance, in particular for HPC applications running on clusters, but also for reliable benchmarking and more (see <a href="explanations/why/#why">Why pin Julia threads?</a>).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Be aware that Julia implements task-based multithreading: <code>M</code> user tasks get scheduled onto <code>N</code> Julia threads. While this package allows you to pin Julia threads to cores / &quot;hardware threads&quot; it is generally not safe to assume that a computation (started with <code>Threads.@spawn</code>) will run on or even stay on a certain Julia thread (see <a href="https://discourse.julialang.org/t/julia-1-7-says-it-can-switch-the-thread-your-task-is-on-how-often-does-that-happen-and-how-can-it-be-disabled/75373/4?u=carstenbauer">this discourse post</a> for more information). If you want this guarantee, you can use our <a href="refs/utility/#ThreadPinning.@tspawnat-Tuple{Any, Any}"><code>@tspawnat</code></a> macro.</p></div></div><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p><strong>Note: Only Linux is supported!</strong></p><p>The package is registered. Hence, you can simply use</p><pre><code class="nohighlight hljs">] add ThreadPinning</code></pre><p>to add the package to your Julia environment.</p><h3 id="Prerequisites"><a class="docs-heading-anchor" href="#Prerequisites">Prerequisites</a><a id="Prerequisites-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisites" title="Permalink"></a></h3><p>For ThreadPinning.jl to properly work, <a href="https://man7.org/linux/man-pages/man1/lscpu.1.html"><code>lscpu</code></a> must be available. This should be the case on virtually all linux systems. Only then can ThreadPinning.jl query relevant system information (sockets, NUMA nodes, hyperthreading, ...).</p><p>In the unlikely case that <code>lscpu</code> isn&#39;t already installed on your system, here are a few ways to get it</p><ul><li>install <code>util-linux</code> via your system&#39;s package manager or manually from <a href="https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/">here</a></li><li>download the same as a Julia artifact: <a href="https://github.com/JuliaBinaryWrappers/util_linux_jll.jl">util<em>linux</em>jll.jl</a></li></ul><h2 id="Noteworthy-Alternatives"><a class="docs-heading-anchor" href="#Noteworthy-Alternatives">Noteworthy Alternatives</a><a id="Noteworthy-Alternatives-1"></a><a class="docs-heading-anchor-permalink" href="#Noteworthy-Alternatives" title="Permalink"></a></h2><ul><li>Setting <code>JULIA_EXCLUSIVE=1</code> will make julia use compact pinning automatically (no external tool needed!)</li><li><a href="https://juliaperf.github.io/LIKWID.jl/dev/examples/dynamic_pinning/"><code>pinthread</code> / <code>pinthreads</code></a> or <code>likwid-pin</code> (CLI tool) from <a href="https://github.com/JuliaPerf/LIKWID.jl">LIKWID.jl</a></li><li><a href="https://discourse.julialang.org/t/thread-affinitization-pinning-julia-threads-to-cores/58069/5">This discourse thread</a> discusses issues with alternatives like <code>numactl</code></li></ul><h2 id="Acknowledgements"><a class="docs-heading-anchor" href="#Acknowledgements">Acknowledgements</a><a id="Acknowledgements-1"></a><a class="docs-heading-anchor-permalink" href="#Acknowledgements" title="Permalink"></a></h2><ul><li>CI infrastructure is provided by the <a href="https://pc2.uni-paderborn.de/">Paderborn Center for Parallel Computing (PC²)</a></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="examples/ex_pinning_julia_threads/">Pinning Julia Threads »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 9 October 2022 10:26">Sunday 9 October 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
